# Initial MVP Overview

This document outlines the high-level plan for creating a tool that visualizes CMake presets as an interactive graph.

## Requirements

*   The tool will parse a root `CMakePresets.json` file.
*   It will recursively follow `include` directives to find all preset definitions.
*   The presets will be displayed as an interactive graph, where each node is a preset and a directed edge from A to B indicates that A "inherits" from B.
*   The graph will support panning and zooming.
*   Each node will be labeled with the preset name.
*   The final output will be a self-contained application compatible with Windows and Linux.
*   The user will be able to specify the root presets file via the command line or a menu.

## Architecture

To facilitate future development, such as a VSCode extension, the application will be designed with a clear separation between the core logic and the user interface.

### Core Logic Module

A dedicated JavaScript/TypeScript module responsible for:
*   Parsing `CMakePresets.json` files.
*   Recursively handling `include` directives.
*   Building the graph data structure (nodes and edges).
*   Providing a simple, well-documented API to the UI layer.

### UI Layer

A separate module that handles all aspects of the user interface. For the initial version, it will:
*   Contain the HTML file with a file input.
*   Use the Core Logic Module's API to get the graph data.
*   Render the graph using a library like D3.js.
*   Handle user interactions like panning and zooming.

## Recommended Approach for Initial MVP

A **pure JavaScript/TypeScript web application** bundled into a **single HTML file**.

### Implementation Phases

To ensure an iterative and manageable development process, the initial MVP will be implemented in the following phases. Each phase is designed to be completed within 1-2 days, with clear validation points and minimal dependencies.

#### Phase 1: Project Setup (*Complete*)
*   **Goal:** Establish the foundational project structure and development environment.
*   **Tasks:** Node.js, npm, Vitest installation; project initialization with `src`, `tests`, `dist` directories; `.gitignore` setup.
*   **Validation:** All setup commands execute successfully; Vitest runs basic test.
*   **Dependencies:** None.

#### Phase 2: Core Logic - Basic Parsing & Graph Structure
*   **Goal:** Implement the core logic for parsing a single `CMakePresets.json` file and building its internal graph representation.
*   **Tasks:** Define TypeScript types for presets; implement JSON parsing; build initial graph data structure (nodes and edges) for `inherits` relationships within a single file.
*   **Validation:** Comprehensive unit tests covering valid/invalid JSON structures, correct parsing, and accurate graph node/edge creation for single-file scenarios.
*   **Dependencies:** Phase 1.

#### Phase 3: UI - Basic Visualization
*   **Goal:** Develop a basic web-based UI to visually render the graph generated from Phase 2 using D3.js, providing early visual feedback.
*   **Tasks:** Create `index.html` with a placeholder for the graph; integrate D3.js; implement basic rendering of nodes and edges (from mock data or Phase 2 output); display preset names as labels.
*   **Validation:** Visual inspection: a static graph is correctly displayed in a web browser, showing nodes and connections.
*   **Dependencies:** Phase 2 (for data structure understanding).

#### Phase 4: Advanced Logic & UI - Includes & Recursion
*   **Goal:** Extend the core logic to handle recursive `include` directives and enhance the UI for navigating larger graphs.
*   **Tasks:** Implement recursive file loading and parsing for `include` directives; update graph construction to reflect cross-file inheritance; integrate basic panning and zooming capabilities in the D3.js visualization.
*   **Validation:** Integration tests with multiple `CMakePresets.json` files and `include` directives; interactive validation of zoom/pan functionality in the browser.
*   **Dependencies:** Phase 2, Phase 3.

#### Phase 5: Finalization - Bundling & Polish
*   **Goal:** Prepare the application for distribution as a single, self-contained application, including final styling and cross-platform verification.
*   **Tasks:** Implement a bundling process to inline all CSS and JavaScript into a single HTML file; apply final styling for readability and user experience; verify application functionality on both Windows and Linux environments.
*   **Validation:** The generated HTML file runs correctly as a standalone application on target platforms, all features (parsing, graph display, interactivity) function as expected.
*   **Dependencies:** Phase 4.
